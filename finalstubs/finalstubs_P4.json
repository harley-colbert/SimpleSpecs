[
  {
    "meta": {
      "phase": "P4",
      "date": "2025-10-02",
      "description": "Finalstubs for Phase P4 with PDF engine toggle and UNO-less parsing.",
      "acceptance_ref": "See plan (UNO-less MinerU) phase P4 document."
    }
  },
  {
    "file_path": "backend/routers/specs.py",
    "language": "python",
    "description": "specs routes.",
    "imported_types": [
      "fastapi.APIRouter",
      "models",
      "store",
      "services"
    ],
    "declared_types": [
      {
        "name": "specs_router",
        "type": "variable",
        "line": 1,
        "docstring": "APIRouter for this domain.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [],
        "returns": null,
        "members": [],
        "properties": []
      }
    ]
  },
  {
    "file_path": "backend/services/specs.py",
    "language": "python",
    "description": "Spec extraction loop.",
    "imported_types": [
      "typing.List",
      "models.SpecItem",
      "models.SectionNode",
      "models.ParsedObject",
      "services.llm_client.LLMAdapter"
    ],
    "declared_types": [
      {
        "name": "build_specs_prompt",
        "type": "function",
        "line": 1,
        "docstring": "Construct per-section spec prompt.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [
          {
            "name": "section",
            "type": "SectionNode"
          },
          {
            "name": "text",
            "type": "str"
          }
        ],
        "returns": "str",
        "members": [],
        "properties": []
      },
      {
        "name": "extract_specs_for_sections",
        "type": "function",
        "line": 1,
        "docstring": "Iterate leaves, call LLM, normalize/dedup.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [
          {
            "name": "file_id",
            "type": "str"
          },
          {
            "name": "root",
            "type": "SectionNode"
          },
          {
            "name": "objects",
            "type": "list[ParsedObject]"
          },
          {
            "name": "adapter",
            "type": "LLMAdapter"
          }
        ],
        "returns": "list[SpecItem]",
        "members": [],
        "properties": []
      }
    ]
  },
  {
    "file_path": "frontend/js/ui-specs.js",
    "language": "javascript",
    "description": "Specs UI",
    "imported_types": [],
    "declared_types": [
      {
        "name": "initSpecs",
        "type": "function",
        "line": 1,
        "docstring": "Run spec loop and render final table.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [],
        "returns": null,
        "members": [],
        "properties": []
      }
    ]
  },
  {
    "file_path": "backend/tests/test_specs_merge.py",
    "language": "python",
    "description": "",
    "imported_types": [],
    "declared_types": [
      {
        "name": "test_dedup_and_merge",
        "type": "function",
        "line": 1,
        "docstring": "Deduplicate specs across sections.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [],
        "returns": null,
        "members": [],
        "properties": []
      }
    ]
  },
  {
    "file_path": "backend/tests/test_specs_loop_resume.py",
    "language": "python",
    "description": "",
    "imported_types": [],
    "declared_types": [
      {
        "name": "test_resume_on_failure",
        "type": "function",
        "line": 1,
        "docstring": "Resume after simulated failures.",
        "modifiers": [],
        "decorators": [],
        "extends": [],
        "args": [],
        "returns": null,
        "members": [],
        "properties": []
      }
    ]
  }
]